# Spring IOC 概念基础

## IOC 容器是什么

## IOC 的实现方式

- **依赖注入**
根据 Bean 名称注入
根据 Bean 类型注入
  - 单个 Bean 对象
  - 集合 Bean 对象
- 注入容器內建 Bean 对象
- 注入非 Bean 对象
- 注入类型
  - 实时注入
  - 延迟注入

- **依赖查找**
  - 根据 Bean 名称查找
    - 即时查找
    - 延时查找
  - 根据 Bean 类型查找
    - 单个 Bean 对象
    - 集合 Bean 对象
  - 根据 Java 注解查找
    - 单个 Bean 对象
    - 集合 Bean 对象

## IOC的依赖来源
- 自定义 Bean
- 容器內建 Bean 对象
- 容器內建依赖

## 什么是依赖注入

&emsp;&emsp;在依赖注入中，不需要认为的进行对象的创建，只需要描述如何创建他们（通过在配置文件描述对象的创建及对象间的依赖关系），由 IOC 容器负责对象的装配。

### 依赖注入的几种方式

&emsp;&emsp;依赖注入主要有下面三种方式，其中在 Spring 框架中使用的是`构造函数注入`和`Setter注入`两种方式。

- **构造函数注入**

- **Setter 注入**

- **接口注入**

### 构造函数注入 VS Setter 注入

- 区别
  | 构造函数注入 | Setter 注入 |
  | :------------- | :------------- |
  | 整体注入,不能部分注入 | 允许部分元素注入 |
  | 不会覆盖 Setter 属性 | 会覆盖 Setter 属性 |
  | 任意修改会创建一个新的实例 | 任意修改不会创建新的实例 |
  | 适用于设置很多属性 | 适用于设置少量属性 |

## Spring 中 IOC 容器的分类

&emsp;&emsp;在 Spring 框架中主要有`BeanFactory`和`ApplicationContext`两中容器的实现。

- **BeanFactory**：一个包含 Bean 集合的工厂类，会在客户端要求时实例化 Bean。

- **ApplicationContext**：扩展了`BeanFactory`接口，在`BeanFactory`的基础上提供了额外的扩展功能。

- **BeanFactory** VS **ApplicationContext**
  | BeanFactory | ApplicationContext |
  | :------------- | :------------- |
  | 使用懒加载 | 使用即时加载 |
  | 使用语法显示提供资源对象 | 自己创建和管理资源对象 |
  | 不支持国际化 | 支持国际化 |
  | 不支持基于依赖的注解 | 支持基于依赖的注解 |

## 使用IOC的好处

- IOC的优点
    - 减少应用程序中代码量
    - 集成了测试，简化开发过程中的测试，使得程序易于测试
    - 降低系统开发过程中的耦合度，以最小的影响和最少的侵入促进松耦合
    - 支持即时实例化和延迟加载服务

- IOC优势
  - 典型的 IoC 管理，依赖查找和依赖注入
  - AOP 抽象
  - 事务抽象
  - 事件机制
  - SPI 扩展
  - 强大的第三方整合
  - 易测试性
  - 更好的面向对象
