{"version":3,"file":"docsify-plugin-flexible-alerts.min.js","sources":["../src/index.js","../node_modules/style-inject/dist/style-inject.es.js"],"sourcesContent":["// eslint-disable-next-line no-unused-vars\nimport styles from './style.css';\n\n(function () {\n  const CONFIG = {\n    style: 'callout',\n    note: {\n      label: 'Note',\n      icon: 'fas fa-info-circle',\n      className: 'info'\n    },\n    tip: {\n      label: 'Tip',\n      icon: 'fas fa-lightbulb',\n      className: 'tip'\n    },\n    warning: {\n      label: 'Warning',\n      icon: 'fas fa-exclamation-triangle',\n      className: 'warning'\n    },\n    danger: {\n      label: 'Attention',\n      icon: 'fas fa-ban',\n      className: 'danger'\n    }\n  };\n\n  function mergeObjects(obj1, obj2, level = 0) {\n    for (const property in obj2) {\n      try {\n        // Property in destination object set; update its value.\n        if (obj2[property].constructor === Object && level < 1) {\n          obj1[property] = mergeObjects(obj1[property], obj2[property], level + 1);\n        } else {\n          obj1[property] = obj2[property];\n        }\n      } catch(e) {\n        // Property in destination object not set; create it and set its value.\n        obj1[property] = obj2[property];\n      }\n    }\n\n    return obj1;\n  }\n\n  const install = function (hook, vm) {\n    const options = mergeObjects(CONFIG, vm.config['flexible-alerts'] || vm.config.flexibleAlerts);\n\n    const findSetting = function findAlertSetting(input, key, fallback, callback) {\n      const match = (input || '').match(new RegExp(`${key}:(([\\\\s\\\\w\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF-]*))`));\n\n      if (!match) {\n        return callback ? callback(fallback) : fallback;\n      }\n\n      return callback ? callback(match[1]) : match[1];\n    };\n\n    hook.afterEach(function (html, next) {\n      const modifiedHtml = html.replace(/<\\s*blockquote[^>]*>(?:<p>|[\\S\\n]*)?\\[!(\\w*)((?:\\|[\\w*:[\\s\\w\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF-]*)*?)\\]([\\s\\S]*?)(?:<\\/p>)?<\\s*\\/\\s*blockquote>/g, function (match, key, settings, value) {\n        const config = options[key.toLowerCase()];\n\n        if (!config) {\n          return match;\n        }\n\n        const style = findSetting(settings, 'style', options.style);\n        let isIconVisible = findSetting(settings, 'iconVisibility', 'visible', (value) => value !== 'hidden');\n        let isLabelVisible = findSetting(settings, 'labelVisibility', 'visible', (value) => value !== 'hidden');\n        let label = findSetting(settings, 'label', config.label);\n        const icon = findSetting(settings, 'icon', config.icon);\n        const className = findSetting(settings, 'className', config.className);\n\n        // Label can be language specific and could be specified via user configuration\n        if (typeof label === 'object') {\n          const foundLabel = Object.keys(label).filter(function (key) {\n            return vm.route.path.indexOf(key) > -1;\n          });\n\n          if (foundLabel && foundLabel.length > 0) {\n            label = label[foundLabel[0]];\n          } else {\n            isLabelVisible = false;\n            isIconVisible = false;\n          }\n        }\n\n        const iconTag = `<i class=\"${icon}\"></i>`;\n\n        return (\n          `<div class=\"alert ${style} ${className}\">\n            <p class=\"title\">\n                ${isIconVisible ? iconTag : ''}\n                ${isLabelVisible ? label : ''}\n            </p>\n            <p>${value}</p>\n          </div>`\n        );\n      });\n\n      next(modifiedHtml);\n    });\n  };\n\n  window.$docsify = window.$docsify || {};\n  window.$docsify.plugins = [].concat(install, window.$docsify.plugins);\n}());\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n"],"names":["CONFIG","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","note","label","icon","className","tip","warning","danger","window","$docsify","plugins","concat","hook","vm","findSetting","input","key","fallback","callback","match","RegExp","options","mergeObjects","obj1","obj2","level","property","constructor","Object","e","config","flexibleAlerts","afterEach","html","next","replace","settings","value","toLowerCase","isIconVisible","isLabelVisible","_typeof","foundLabel","keys","filter","route","path","indexOf","length","iconTag"],"mappings":";;;;;;;kQAIQA,GCJR,SAAqBC,EAAKC,QACX,IAARA,IAAiBA,EAAM,IAC5B,IAAIC,EAAWD,EAAIC,SAEnB,GAAKF,GAA2B,oBAAbG,SAAnB,CAEA,IAAIC,EAAOD,SAASC,MAAQD,SAASE,qBAAqB,QAAQ,GAC9DC,EAAQH,SAASI,cAAc,SACnCD,EAAME,KAAO,WAEI,QAAbN,GACEE,EAAKK,WACPL,EAAKM,aAAaJ,EAAOF,EAAKK,YAKhCL,EAAKO,YAAYL,GAGfA,EAAMM,WACRN,EAAMM,WAAWC,QAAUb,EAE3BM,EAAMK,YAAYR,SAASW,eAAed,qnDDnBtCD,EAAS,CACbO,MAAO,UACPS,KAAM,CACJC,MAAO,OACPC,KAAM,qBACNC,UAAW,QAEbC,IAAK,CACHH,MAAO,MACPC,KAAM,mBACNC,UAAW,OAEbE,QAAS,CACPJ,MAAO,UACPC,KAAM,8BACNC,UAAW,WAEbG,OAAQ,CACNL,MAAO,YACPC,KAAM,aACNC,UAAW,WAiFfI,OAAOC,SAAWD,OAAOC,UAAY,GACrCD,OAAOC,SAASC,QAAU,GAAGC,OA5Db,SAAUC,EAAMC,GAGV,SAAdC,EAAwCC,EAAOC,EAAKC,EAAUC,OAC5DC,GAASJ,GAAS,IAAII,MAAM,IAAIC,iBAAUJ,2EAE3CG,EAIED,EAAWA,EAASC,EAAM,IAAMA,EAAM,GAHpCD,EAAWA,EAASD,GAAYA,MANrCI,WAnBCC,EAAaC,EAAMC,SAAMC,mCAAQ,MACnC,IAAMC,KAAYF,MAGfA,EAAKE,GAAUC,cAAgBC,QAAUH,EAAQ,EACnDF,EAAKG,GAAYJ,EAAaC,EAAKG,GAAWF,EAAKE,GAAWD,EAAQ,GAEtEF,EAAKG,GAAYF,EAAKE,GAExB,MAAMG,GAENN,EAAKG,GAAYF,EAAKE,UAInBH,EAISD,CAAarC,EAAQ4B,EAAGiB,OAAO,oBAAsBjB,EAAGiB,OAAOC,gBAY/EnB,EAAKoB,UAAU,SAAUC,EAAMC,GA0C7BA,EAzCqBD,EAAKE,QAAQ,wJAAyJ,SAAUhB,EAAOH,EAAKoB,EAAUC,OACnNP,EAAST,EAAQL,EAAIsB,mBAEtBR,SACIX,MAGH3B,EAAQsB,EAAYsB,EAAU,QAASf,EAAQ7B,OACjD+C,EAAgBzB,EAAYsB,EAAU,iBAAkB,UAAW,SAACC,SAAoB,WAAVA,IAC9EG,EAAiB1B,EAAYsB,EAAU,kBAAmB,UAAW,SAACC,SAAoB,WAAVA,IAChFnC,EAAQY,EAAYsB,EAAU,QAASN,EAAO5B,OAC5CC,EAAOW,EAAYsB,EAAU,OAAQN,EAAO3B,MAC5CC,EAAYU,EAAYsB,EAAU,YAAaN,EAAO1B,cAGvC,WAAjBqC,EAAOvC,GAAoB,KACvBwC,EAAad,OAAOe,KAAKzC,GAAO0C,OAAO,SAAU5B,UAChB,EAA9BH,EAAGgC,MAAMC,KAAKC,QAAQ/B,KAG3B0B,GAAkC,EAApBA,EAAWM,OAC3B9C,EAAQA,EAAMwC,EAAW,IAGzBH,EADAC,GAAiB,MAKfS,sBAAuB9C,8CAGNX,cAASY,gEAEtBmC,EAAgBU,EAAU,gCAC1BT,EAAiBtC,EAAQ,iDAE1BmC,kCAU8B7B,OAAOC,SAASC"}